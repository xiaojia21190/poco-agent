# =============================================================================
# Poco Docker Compose Environment Variables
# =============================================================================
# Copy this file to .env and configure the values below.
# Variables with defaults can be omitted; required ones are marked as such.
# =============================================================================

# -----------------------------------------------------------------------------
# REQUIRED: Claude API Configuration
# -----------------------------------------------------------------------------
# Configure Anthropic API key:
# Get credentials from: https://console.anthropic.com/
ANTHROPIC_API_KEY=

# Optional: Use a custom API base URL (e.g., for proxy services)
# ANTHROPIC_BASE_URL=https://api.anthropic.com

# Default Claude model to use
# DEFAULT_MODEL=claude-sonnet-4-20250514

# Optional: Allowed models for UI selection (JSON array only)
# Example:
# MODEL_LIST=["claude-sonnet-4-20250514","claude-opus-4-20250514"]

# -----------------------------------------------------------------------------
# SECURITY: CHANGE THESE IN PRODUCTION
# -----------------------------------------------------------------------------
# Secret key for backend JWT signing
BACKEND_SECRET_KEY=change-this-secret-key-in-production

# Token for internal API communication between services
INTERNAL_API_TOKEN=change-this-token-in-production

# Token for executor callbacks to manager
CALLBACK_TOKEN=change-this-token-in-production

# -----------------------------------------------------------------------------
# Service Ports (Optional)
# -----------------------------------------------------------------------------
# FRONTEND_PORT=3000
# BACKEND_PORT=8000
# EXECUTOR_MANAGER_PORT=8001
# POSTGRES_PORT=5432
# S3_PORT=9000
# S3_CONSOLE_PORT=9001

# -----------------------------------------------------------------------------
# Database (Optional - defaults are usually fine)
# -----------------------------------------------------------------------------
# POSTGRES_DB=poco
# POSTGRES_USER=postgres
# POSTGRES_PASSWORD=postgres

# -----------------------------------------------------------------------------
# S3-Compatible Storage (Optional - defaults are usually fine for local dev)
# -----------------------------------------------------------------------------
# RUSTFS_DATA_DIR=./oss_data
# S3_ACCESS_KEY=poco
# S3_SECRET_KEY=poco-secret
# S3_BUCKET=poco
# S3_REGION=us-east-1
# S3_ENDPOINT=http://rustfs:9000
# S3_PUBLIC_ENDPOINT=http://localhost:9000
# S3_FORCE_PATH_STYLE=true
#
# Cloudflare R2 example (bucket must already exist):
# S3_ENDPOINT=https://<accountid>.r2.cloudflarestorage.com
# S3_PUBLIC_ENDPOINT=https://<accountid>.r2.cloudflarestorage.com
# S3_REGION=auto
# S3_FORCE_PATH_STYLE=false

# -----------------------------------------------------------------------------
# Logging (Optional)
# -----------------------------------------------------------------------------
# LOG_LEVEL=INFO
# LOG_TO_FILE=false
# LOG_DIR=./logs
# LOG_BACKUP_COUNT=14
# LOG_SQL=false
# UVICORN_ACCESS_LOG=false

# -----------------------------------------------------------------------------
# Executor Manager (Optional)
# -----------------------------------------------------------------------------
# Maximum number of tasks to run concurrently
# MAX_CONCURRENT_TASKS=5

# Browser / Desktop (Optional)
# Default desktop viewport for browser-enabled runs (Playwright MCP).
# POCO_BROWSER_VIEWPORT_SIZE=1366x768
# Timezone passed through to executor containers.
# EXECUTOR_TIMEZONE=Asia/Shanghai

# Task polling configuration
# TASK_PULL_ENABLED=true
# TASK_PULL_INTERVAL_SECONDS=2
# TASK_CLAIM_LEASE_SECONDS=180

# Workspace cleanup and archival
# WORKSPACE_CLEANUP_ENABLED=false
# WORKSPACE_ARCHIVE_ENABLED=true
# WORKSPACE_ARCHIVE_DAYS=7
# WORKSPACE_IGNORE_DOT_FILES=true

# -----------------------------------------------------------------------------
# IM Service (Optional)
# -----------------------------------------------------------------------------
# Enable with: docker compose --profile im up
#
# IM_DATABASE_URL=sqlite:///./im.db
# BACKEND_USER_ID=default
#
# Telegram (required for Telegram integration)
# TELEGRAM_BOT_TOKEN=
# Optional secret token for Telegram webhook verification
# TELEGRAM_WEBHOOK_SECRET_TOKEN=
#
# DingTalk bot integration
# DINGTALK_ENABLED=true
# DINGTALK_WEBHOOK_TOKEN=
# DingTalk Stream Mode (recommended for inbound messages without public webhook)
# DINGTALK_STREAM_ENABLED=true
# Optional: subscribe all DingTalk events (EVENT topic="*"), can be noisy
# DINGTALK_STREAM_SUBSCRIBE_EVENTS=false
# DingTalk OpenAPI (recommended for proactive messages via conversationId)
# DINGTALK_CLIENT_ID=
# DINGTALK_CLIENT_SECRET=
# DINGTALK_ROBOT_CODE=
# DINGTALK_OPEN_BASE_URL=https://api.dingtalk.com
# Optional fallback outbound webhook URL
# DINGTALK_WEBHOOK_URL=
#
# Polling intervals (seconds)
# POLL_USER_INPUT_INTERVAL_SECONDS=2
# POLL_SESSIONS_RECENT_INTERVAL_SECONDS=5
# POLL_SESSIONS_FULL_INTERVAL_SECONDS=300
# POLL_HTTP_TIMEOUT_SECONDS=10

# -----------------------------------------------------------------------------
# Container Images (Optional - override for local development)
# -----------------------------------------------------------------------------
# BACKEND_IMAGE=ghcr.io/poco-ai/poco-backend:latest
# EXECUTOR_MANAGER_IMAGE=ghcr.io/poco-ai/poco-executor-manager:latest
# EXECUTOR_IMAGE=ghcr.io/poco-ai/poco-executor:lite
# Optional: executor image with desktop/browser stack (used when browser_enabled=true).
# EXECUTOR_BROWSER_IMAGE=ghcr.io/poco-ai/poco-executor:full
# FRONTEND_IMAGE=ghcr.io/poco-ai/poco-frontend:latest
# IM_IMAGE=ghcr.io/poco-ai/poco-im:latest

# RUSTFS_IMAGE=rustfs/rustfs:latest
# RUSTFS_INIT_IMAGE=minio/mc:latest
